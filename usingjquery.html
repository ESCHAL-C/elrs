<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>eLRS Front End - using jQuery</title>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script>
</script>

<style>
  .calculator {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: flex-start;
    padding: 0;
    margin: 0;
    list-style: none;
  }

  .multi-input {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    justify-content: flex-start;
    padding: 0;
    margin: 0;
    list-style: none;
  }

  .singleinput {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    justify-content: flex-start;
    padding: 0;
    margin: 0;
    list-style: none;
  }

  .label, .textentry, .textecho {
    padding: 5px;
    margin-top: 10px;
    text-align: left;
  }

  .label {
    width: 200px;
  }

  .textentry, .textecho {
    width: 100px;
  }

  .resultsbtn {
    width: 200px;
  }



</style>
</head>
<body>

  <h1>eLRS Front End Demo</h1>
  <p>This eLRS tool can accept coordinates in four different formats:</p>
    <ul>
      <li>Lat, Lon</li>
      <li>RouteID (Route Name), Reference Marker, and Displacement</li>
      <li>RouteID (Route Name), And Distance from Origin</li>
      <li>CSJ And Mile Point Measure</li>
    </ul>

  <p>NOTE: This webpage does not have any data validation for text fields yet.</p>

  <div class="calculator">
    <form style = "flex-basis: 40%;">
        <div class="multi-input">
          <h2>Query by Lat Lon</h2>
          <p>Example: Lat=29.39780972 Lon=-94.98759004</p>
          <div class="singleinput">
            <label for="lat" class="label">Latitude:</label>
            <input type="text" id="lat" name="lat" class="textentry">
            <p id="show_lat" class="textecho"></p>
          </div>
          <div class="singleinput">
            <label for="lon" class="label">Longitude:</label>
            <input type="text" id="lon" name="lon" class="textentry">
            <p id="show_lon" class="textecho"></p>
          </div>
          <br><button type="button" onclick="myFunction1()" class="resultsbtn">Return Results</button><br><br>
          <a href="" id="elrs1_url" class="erls_url"></a>
        </div>
        <div class="multi-input">
          <h2>Query by Route Name</h2>
          <p>Example: RouteID=IH0010-KG ReferenceMarker=476 Displacement=4</p>
          <div class="singleinput">
            <label for="routeid" class="label">RouteID (Route Name):</label>
            <input type="text" id="routeid" name="routeid" class="textentry">
            <p id="show_routeid" class="textecho"></p>
          </div>
          <div class="singleinput">
            <label for="refmarker" class="label">Reference Marker:</label>
            <input type="text" id="refmarker" name="refmarker" class="textentry">
            <p id="show_refmarker" class="textecho"></p>
          </div>
          <div class="singleinput">
            <label for="displacement" class="label">Displacement:</label>
            <input type="text" id="displacement" name="displacement" class="textentry">
            <p id="show_displacement" class="textecho"></p>
          </div>
          <div class="singleinput">
            <label for="dfo" class="label">Distance from Origin:</label>
            <input type="text" id="dfo" name="dfo" class="textentry">
            <p id="show_dfo" class="textecho"></p>
          </div>
          <br><button type="button" onclick="myFunction2()" class="resultsbtn">Return Results</button><br><br>
          <a href="" id="elrs2_url" class="erls_url"></a>
        </div>
        <div class="multi-input">
          <h2>Query by CSJ</h2>
          <p>Example: ControlSectionNumber=LY7609 MilePointMeasure=.2</p>
          <div class="singleinput">
            <label for="csj" class="label">CSJ:</label>
            <input type="text" id="csj" name="csj" class="textentry">
            <p id="show_csj" class="textecho"></p>
          </div>
          <div class="singleinput">
            <label for="mpm" class="label">Mile Point Measure:</label>
            <input type="text" id="mpm" name="mpm" class="textentry">
            <p id="show_mpm" class="textecho"></p>
          </div>
          <br><button type="button" onclick="myFunction3()" class="resultsbtn">Return Results</button><br><br>
          <a href="" id="elrs3_url" class="erls_url"></a>
        </div>
    </form>

    <iframe src="" id="elrs_frame" style = "flex-basis: 40%;"></iframe>
  </div>

  <script>
    function myFunction1() {
        var lat = document.getElementById("lat").value;
        document.getElementById("show_lat").innerHTML = lat;
        var lon = document.getElementById("lon").value;
        document.getElementById("show_lon").innerHTML = lon;

        var basepath = "https://grid-sys.us-e1.cloudhub.io/api/"
        var elrs1 = basepath + "elrs1?Lat=" + lat + "&Lon=" + lon

        document.getElementById("elrs1_url").innerHTML=elrs1;
        document.getElementById("elrs1_url").href=elrs1;
        document.getElementById("elrs_frame").src=elrs1;
    }

    function myFunction2() {
        var routeid = document.getElementById("routeid").value;
        var routeid = $.trim(routeid)
        document.getElementById("show_routeid").innerHTML = routeid;
        var refmarker = document.getElementById("refmarker").value;
        var refmarker = $.trim(refmarker)
        document.getElementById("show_refmarker").innerHTML = refmarker;
        var displacement = document.getElementById("displacement").value;
        var displacement = $.trim(displacement)
        document.getElementById("show_displacement").innerHTML = displacement;
        var dfo = document.getElementById("dfo").value;
        var dfo = $.trim(dfo)
        document.getElementById("show_dfo").innerHTML = dfo;

        var basepath = "https://grid-sys.us-e1.cloudhub.io/api/"
        var elrs2 = basepath + "elrs2?RouteID=" + routeid + "&ReferenceMarker=" + refmarker + "&Displacement=" + displacement
        var elrs4 = basepath + "elrs4?RouteID=" + routeid + "&DistanceFromOrigin=" + dfo

        document.getElementById("elrs2_url").innerHTML=elrs2;
        document.getElementById("elrs2_url").href=elrs2;
        document.getElementById("elrs_frame").src=elrs2;
    }

    function myFunction3() {
        var csj = document.getElementById("csj").value;
        document.getElementById("show_csj").innerHTML = csj;
        var mpm = document.getElementById("mpm").value;
        document.getElementById("show_mpm").innerHTML = mpm;

        var basepath = "https://grid-sys.us-e1.cloudhub.io/api/"
        var elrs3 = basepath + "elrs3?ControlSectionNumber=" + csj + "&MilePointMeasure=" + mpm

        document.getElementById("elrs3_url").innerHTML=elrs3;
        document.getElementById("elrs3_url").href=elrs3;
        document.getElementById("elrs_frame").src=elrs3;
    }



//https://stackoverflow.com/questions/4728520/get-innerhtml-from-external-page-with-javascript

//https://grid-sys.us-e1.cloudhub.io/api/elrs1?Lat=29.39780972&Lon=-94.98759004
//https://grid-sys.us-e1.cloudhub.io/api/elrs2?RouteID=IH0010-KG&ReferenceMarker=476&Displacement=4
//https://grid-sys.us-e1.cloudhub.io/api/elrs3?ControlSectionNumber=LY7609&MilePointMeasure=.2
//https://grid-sys.us-e1.cloudhub.io/api/elrs4?RouteID=IH0010-KG&DistanceFromOrigin=.5


  </script>


</body>
</html>
